(this["webpackJsonpgame-points-calculator"]=this["webpackJsonpgame-points-calculator"]||[]).push([[0],{114:function(e,n,t){},115:function(e,n,t){},118:function(e,n,t){},125:function(e,n,t){},126:function(e,n,t){},127:function(e,n,t){},128:function(e,n,t){},130:function(e,n,t){},131:function(e,n,t){},133:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(11),o=t.n(r),s=(t(114),t(7)),i=t(12),l=(t(115),t(31)),j="game",u=function(){var e=localStorage.getItem(j);if(e){var n=JSON.parse(e);return Object(s.a)(Object(s.a)({},n),{},{timestamp:new Date(n.timestamp)})}return{id:Object(l.v4)(),name:"New Game",timestamp:new Date,players:[]}},b=t(194),O=t(172),p=t(134),d=t(173),m=t(174),f=t(135),h=t(175),x=t(171),y=t(35),v=t.n(y),g=(t(118),t(169)),C=t(170),w=t(2);function k(e){var n=e.message,t=e.open,a=e.onConfirm,c=e.onDecline;return Object(w.jsxs)(b.a,{open:t,fullWidth:!0,onClose:c,children:[Object(w.jsx)(g.a,{children:n}),Object(w.jsxs)(C.a,{children:[Object(w.jsx)(x.a,{color:"primary",onClick:c,children:" No "}),Object(w.jsx)(x.a,{color:"primary",onClick:a,children:" Yes "})]})]})}function N(e){var n=e.players,t=e.open,c=e.onClose,r=e.onDelete,o=Object(a.useState)(!1),s=Object(i.a)(o,2),l=s[0],j=s[1],u=Object(a.useState)(""),y=Object(i.a)(u,2),g=y[0],C=y[1],N=Object(a.useState)(""),S=Object(i.a)(N,2),P=S[0],D=S[1];return Object(w.jsxs)(b.a,{open:t,fullWidth:!0,onClose:c,children:[Object(w.jsx)(O.a,{children:n.map((function(e,n){return Object(w.jsxs)(p.a,{children:[Object(w.jsx)(d.a,{primary:e.name}),Object(w.jsx)(m.a,{children:Object(w.jsx)(f.a,{onClick:function(){return n=e.id,t=e.name,C(n),D(t),void j(!0);var n,t},children:Object(w.jsx)(v.a,{color:"primary"})})})]},n)}))}),Object(w.jsx)(h.a,{}),Object(w.jsx)(x.a,{color:"primary",onClick:c,children:" Close "}),Object(w.jsx)(k,{message:"Are you sure you want to delete ".concat(P,"?"),open:l,onConfirm:function(){j(!1),r(g)},onDecline:function(){return j(!1)}})]})}var S=t(48),P=(t(125),t(177)),D=t(195),A=t(83),W=t.n(A),G=t(82),L=t.n(G);function T(e){var n=e.players,t=e.open,c=e.onClose,r=Object(a.useState)("asc"),o=Object(i.a)(r,2),l=o[0],j=o[1],u=n.map((function(e){return{position:0,name:e.name,score:e.points.reduce((function(e,n){return e+(n||0)}),0)}})).sort((function(e,n){return"asc"===l?e.score-n.score:n.score-e.score})).reduce((function(e,n,t){return t>0&&e[t-1].score===n.score?e.concat(Object(s.a)(Object(s.a)({},n),{},{position:e[t-1].position})):e.concat(Object(s.a)(Object(s.a)({},n),{},{position:t+1}))}),Array());return Object(w.jsxs)(b.a,{open:t,fullWidth:!0,onClose:c,children:["asc"===l?Object(w.jsx)(x.a,{color:"primary",endIcon:Object(w.jsx)(L.a,{}),onClick:function(){return j("desc")},children:"Highest First"}):Object(w.jsx)(x.a,{color:"primary",endIcon:Object(w.jsx)(W.a,{}),onClick:function(){return j("asc")},children:"Lowest First"}),Object(w.jsx)(h.a,{}),Object(w.jsx)(O.a,{children:u.map((function(e,n){return Object(w.jsxs)(p.a,{children:[Object(w.jsx)(P.a,{className:e.position<=3?"place-"+e.position:"default-place",children:Object(w.jsxs)(D.a,{children:[" ",e.score," "]})}),Object(w.jsx)(d.a,{primary:e.name})]},n)}))}),Object(w.jsx)(h.a,{}),Object(w.jsx)(x.a,{color:"primary",onClick:c,children:" Close "})]})}t(126),t(127);var B=function(e){var n=e.player,t=e.onPointsChange,a=e.readonly;return 0!==n.points.length&&null===n.points[n.points.length-1]||t(n.points.concat(null)),Object(w.jsx)("div",{className:"player-container",children:n.points.map((function(e,c){return Object(w.jsx)("div",{className:"player-points player-input-cell",children:(!a||null!==e)&&Object(w.jsx)("input",{className:null!==e?"points-input":"points-input empty-input",type:"number",value:null!==e?e:"",onChange:function(e){return function(e,a){var c=e.target.value?+e.target.value:null,r=n.points.map((function(e,n){return n===a?c:e}));a===n.points.length-1?t(r.concat(null)):t(r)}(e,c)},onClick:function(e){e.currentTarget.select()},disabled:a})},c)}))})};function E(e){var n=e.players,t=e.onPlayerNameChange,a=e.onPointsChange,c=e.readonly;return Object(w.jsxs)("div",{className:"player-table-container",children:[Object(w.jsx)("div",{className:"player-names",children:n.map((function(e,n){return Object(w.jsx)("input",{className:"player-name",type:"text",disabled:c,value:e.name,onChange:function(n){return t(n.target.value,e.id)},onClick:function(e){e.currentTarget.select()}},n)}))}),Object(w.jsx)("div",{className:"player-table",children:n.map((function(e,n){return Object(w.jsx)(B,{player:e,onPointsChange:function(n){return a(n,e.id)},readonly:c},n)}))}),Object(w.jsx)("div",{className:"player-scores",children:n.map((function(e,n){return Object(w.jsx)("div",{className:"player-score player-header-cell",children:e.points.reduce((function(e,n){return e+(n||0)}),0)},n)}))})]})}t(128);var F=t(97),I=t(178),H=t(179),J=t(55),R=t(84),q=t.n(R),U=t(85),z=t.n(U),M=t(67),Y=t.n(M),$=t(86),K=t.n($),Q=t(87),V=t.n(Q),X=t(88),Z=t.n(X);function _(e){var n=e.gameName,t=e.onAddPlayer,a=e.onClearPoints,r=e.onOpenDelete,o=e.onOpenLeaderBoard,s=e.onNewGame,l=e.onNameChange,j=e.onOpenHistory,u=c.a.useState(!1),b=Object(i.a)(u,2),O=b[0],p=b[1],m=c.a.useState(null),h=Object(i.a)(m,2),x=h[0],y=h[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"top-bar",children:[Object(w.jsx)("div",{className:"empty-container"}),Object(w.jsx)("input",{type:"text",className:"game-name-input",value:n,onChange:function(e){return l(e.target.value)},onClick:function(e){e.currentTarget.select()}}),Object(w.jsx)(f.a,{onClick:function(e){y(e.currentTarget)},children:Object(w.jsx)(q.a,{className:"top-bar-icon"})})]}),Object(w.jsxs)(F.a,{anchorEl:x,open:!!x,onClose:function(){y(null)},children:[Object(w.jsxs)(I.a,{onClick:function(){p(!0)},children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(z.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" Clear Points "})})]}),Object(w.jsxs)(I.a,{onClick:r,children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(v.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" Remove Players "})})]}),Object(w.jsxs)(I.a,{onClick:t,children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(Y.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" Add Player "})})]}),Object(w.jsxs)(I.a,{onClick:o,children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(K.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" Leaderboard "})})]}),Object(w.jsxs)(I.a,{onClick:s,children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(V.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" New Game "})})]}),Object(w.jsxs)(I.a,{onClick:j,children:[Object(w.jsxs)(H.a,{children:[" ",Object(w.jsx)(Z.a,{color:"secondary"})," "]}),Object(w.jsx)(d.a,{primary:Object(w.jsx)(J.a,{color:"primary",children:" History "})})]})]}),Object(w.jsx)(k,{message:"Are you sure you want to clear all points?",open:O,onConfirm:function(){p(!1),a()},onDecline:function(){return p(!1)}})]})}t(130);var ee=t(180),ne=t(196),te=t(197),ae=t(181),ce=t(168),re=t(192),oe=t(89),se=t.n(oe);function ie(e){var n=e.open,t=e.game,c=e.onClose,r=e.onSubmit,o=Object(a.useState)({id:"",timestamp:new Date,name:"",players:[]}),j=Object(i.a)(o,2),u=j[0],d=j[1];Object(a.useEffect)((function(){n&&d({id:Object(l.v4)(),timestamp:new Date,name:t.name,players:t.players.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{points:[null]})}))})}),[t,n]);var m=function(e){d(Object(s.a)(Object(s.a)({},u),{},{name:e}))};return Object(w.jsxs)(b.a,{fullWidth:!0,open:n,onClose:c,children:[Object(w.jsxs)(O.a,{children:[Object(w.jsx)(p.a,{children:Object(w.jsxs)(ee.a,{variant:"outlined",className:"player-name-form-control",children:[Object(w.jsx)(ne.a,{children:" Game Name "}),Object(w.jsx)(te.a,{type:"text",value:u.name,error:!u.name,onChange:function(e){return m(e.target.value)},endAdornment:Object(w.jsx)(ae.a,{position:"end",children:Object(w.jsx)(f.a,{onClick:function(){return m("")},children:Object(w.jsx)(se.a,{color:"primary"})})}),labelWidth:93})]})}),Object(w.jsx)(p.a,{children:Object(w.jsx)(J.a,{style:{fontWeight:"bold"},children:" Players "})}),u.players.map((function(e,n){return Object(w.jsx)(ce.a,{in:!0,children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(re.a,{label:"Player Name",variant:"outlined",value:e.name,style:{flex:"1"},onChange:function(e){return function(e,n){d(Object(s.a)(Object(s.a)({},u),{},{players:u.players.map((function(t,a){return n===a?Object(s.a)(Object(s.a)({},t),{},{name:e}):t}))}))}(e.target.value,n)},error:!e.name}),Object(w.jsx)(f.a,{onClick:function(){return function(e){d(Object(s.a)(Object(s.a)({},u),{},{players:u.players.filter((function(n,t){return t!==e}))}))}(n)},children:Object(w.jsx)(v.a,{color:"primary"})})]})},n)})),Object(w.jsx)(p.a,{style:{justifyContent:"center"},children:Object(w.jsx)(f.a,{onClick:function(){d(Object(s.a)(Object(s.a)({},u),{},{players:u.players.concat({id:Object(l.v4)(),name:"",points:[null]})}))},children:Object(w.jsx)(Y.a,{color:"primary"})})})]}),Object(w.jsx)(h.a,{}),Object(w.jsx)(x.a,{color:"primary",onClick:function(){return r(u)},disabled:function(){var e=!!u.players.find((function(e){return!e.name})),n=!u.name;return e||n}(),children:"New Game"})]})}t(131);var le=t(199),je=t(182),ue=t(183),be=t(184),Oe=t(185),pe=t(186),de=t(187),me=t(188),fe=t(189),he=t(90),xe=t.n(he),ye=t(92),ve=t.n(ye),ge=t(91),Ce=t.n(ge);function we(e){var n=e.open,t=e.onClose,c=e.onReturnPlaying,r=e.onDeleteGame,o=e.games,s=Object(a.useState)(null),l=Object(i.a)(s,2),j=l[0],u=l[1],O=Object(a.useState)(!1),p=Object(i.a)(O,2),d=p[0],m=p[1],h=Object(a.useState)(!1),x=Object(i.a)(h,2),y=x[0],g=x[1],C=Object(a.useState)(!1),N=Object(i.a)(C,2),S=N[0],P=N[1],D=Object(a.useState)(null),A=Object(i.a)(D,2),W=A[0],G=A[1];return Object(w.jsxs)(b.a,{fullWidth:!0,open:n,onClose:t,children:[o.length<=0&&Object(w.jsx)(J.a,{children:"No past games found!"}),o.map((function(e,n){return Object(w.jsxs)(le.a,{expanded:W===n,onChange:function(){var e;G(W===(e=n)?null:e)},children:[Object(w.jsx)(je.a,{expandIcon:Object(w.jsx)(xe.a,{color:"primary"}),children:Object(w.jsxs)("div",{className:"summary-container",children:[Object(w.jsx)(J.a,{children:e.name}),Object(w.jsxs)(J.a,{className:"summary-subtitle",variant:"caption",children:[e.timestamp.toLocaleDateString()," - ",e.timestamp.toLocaleTimeString()]})]})}),Object(w.jsx)(ue.a,{style:{overflow:"auto"},children:Object(w.jsxs)(be.a,{size:"small",children:[Object(w.jsx)(Oe.a,{children:Object(w.jsx)(pe.a,{children:e.players.map((function(e,n){return Object(w.jsx)(de.a,{children:e.name},n)}))})}),Object(w.jsx)(me.a,{children:Object(w.jsx)(pe.a,{children:e.players.map((function(e,n){return Object(w.jsx)(de.a,{component:"th",scope:"row",children:e.points.reduce((function(e,n){return e+(n||0)}),0)},n)}))})})]})}),Object(w.jsx)(fe.a,{children:Object(w.jsxs)("div",{className:"history-actions",children:[Object(w.jsx)(f.a,{onClick:function(){return function(e){u(e),g(!0)}(e)},children:Object(w.jsx)(v.a,{color:"primary"})}),Object(w.jsx)(f.a,{onClick:function(){return function(e){u(e),P(!0)}(e)},children:Object(w.jsx)(Ce.a,{color:"primary"})}),Object(w.jsx)(f.a,{onClick:function(){return function(e){u(e),m(!0)}(e)},children:Object(w.jsx)(ve.a,{color:"primary"})})]})})]},n)})),Object(w.jsx)(b.a,{open:d,onClose:function(){return m(!1)},children:Object(w.jsx)(E,{players:(null===j||void 0===j?void 0:j.players)||[],onPlayerNameChange:function(){},onPointsChange:function(){},readonly:!0})}),Object(w.jsx)(k,{message:"Are you sure you want to delete ".concat(null===j||void 0===j?void 0:j.name,"?"),open:y,onConfirm:function(){g(!1),j&&r(j.id)},onDecline:function(){return g(!1)}}),Object(w.jsx)(k,{message:"Are you sure you want to replay ".concat(null===j||void 0===j?void 0:j.name,"?"),open:S,onConfirm:function(){j&&c(j),P(!1)},onDecline:function(){return P(!1)}})]})}var ke=t(26),Ne=t.n(ke),Se=t(51),Pe=t(93),De=t(98),Ae=t(96),We=function(e){Object(De.a)(t,e);var n=Object(Ae.a)(t);function t(){var e;return Object(Pe.a)(this,t),(e=n.call(this,"GamesDatabase")).games=void 0,e.version(1).stores({games:"id,timestamp,name,players"}),e.games=e.table("games"),e}return t}(t(94).a);var Ge=function(){var e=function(){var e=Object(a.useState)(u),n=Object(i.a)(e,2),t=n[0],c=n[1];return[t,function(e){c(e),localStorage.setItem(j,JSON.stringify(e))}]}(),n=Object(i.a)(e,2),t=n[0],c=n[1],r=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(new We),o=Object(i.a)(r,1)[0],s=Object(S.b)().enqueueSnackbar;Object(a.useEffect)((function(){o.transaction("r",o.games,Object(Se.a)(Ne.a.mark((function e(){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.games.orderBy("timestamp").reverse().toArray();case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)}))))}),[o]);var l=function(){var e=Object(Se.a)(Ne.a.mark((function e(){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.games.orderBy("timestamp").reverse().toArray();case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{games:t,deleteGame:function(){var e=Object(Se.a)(Ne.a.mark((function e(n){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.transaction("rw",o.games,Object(Se.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.games.where("id").equals(n).delete();case 2:return e.next=4,l();case 4:s("Successfully deleted game",{variant:"success"});case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),addGame:function(e){o.transaction("rw",o.games,Object(Se.a)(Ne.a.mark((function n(){return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.games.add(e);case 2:return n.next=4,l();case 4:case"end":return n.stop()}}),n)}))))}}}(),o=r.games,b=r.deleteGame,O=r.addGame,p=Object(a.useState)(!1),d=Object(i.a)(p,2),m=d[0],f=d[1],h=Object(a.useState)(!1),x=Object(i.a)(h,2),y=x[0],v=x[1],g=Object(a.useState)(!1),C=Object(i.a)(g,2),k=C[0],P=C[1],D=Object(a.useState)(!1),A=Object(i.a)(D,2),W=A[0],G=A[1],L=Object(S.b)().enqueueSnackbar;0===t.players.length&&c(Object(s.a)(Object(s.a)({},t),{},{players:[{id:Object(l.v4)(),name:"Liam",points:[null]}]}));var B=function(e){return e.players.map((function(e){return e.points.filter((function(e){return null!==e}))})).filter((function(e){return e.length>0})).length>=e.players.length},F=function(e){B(t)&&O(t),c(Object(s.a)(Object(s.a)({},e),{},{id:Object(l.v4)(),timestamp:new Date,players:e.players})),P(!1)};return Object(w.jsxs)("div",{className:"app",children:[Object(w.jsx)(_,{gameName:t.name,onNameChange:function(e){c(Object(s.a)(Object(s.a)({},t),{},{name:e}))},onAddPlayer:function(){c(Object(s.a)(Object(s.a)({},t),{},{players:t.players.concat({id:Object(l.v4)(),name:"Player ".concat(t.players.length+1),points:[null]})})),L("".concat(t.players.length+1," players"))},onClearPoints:function(){F(Object(s.a)(Object(s.a)({},t),{},{players:t.players.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{points:[null]})}))}))},onOpenDelete:function(){return f(!0)},onOpenLeaderBoard:function(){return v(!0)},onNewGame:function(){return P(!0)},onOpenHistory:function(){return G(!0)}}),Object(w.jsx)(E,{onPlayerNameChange:function(e,n){c(Object(s.a)(Object(s.a)({},t),{},{players:t.players.map((function(t){return t.id===n?Object(s.a)(Object(s.a)({},t),{},{name:e}):t}))}))},onPointsChange:function(e,n){c(Object(s.a)(Object(s.a)({},t),{},{players:t.players.map((function(t){return t.id===n?Object(s.a)(Object(s.a)({},t),{},{points:e}):t}))}))},players:t.players,readonly:!1}),Object(w.jsx)(N,{players:t.players,open:m,onDelete:function(e){c(Object(s.a)(Object(s.a)({},t),{},{players:t.players.filter((function(n){return n.id!==e}))}))},onClose:function(){return f(!1)}}),Object(w.jsx)(T,{players:t.players,open:y,onClose:function(){return v(!1)}}),Object(w.jsx)(ie,{open:k,game:t,onClose:function(){return P(!1)},onSubmit:F}),Object(w.jsx)(we,{open:W,onClose:function(){return G(!1)},onReturnPlaying:function(e){B(t)&&O(t),b(e.id),c(Object(s.a)(Object(s.a)({},e),{},{timestamp:new Date})),G(!1)},onDeleteGame:function(e){b(e),G(!1)},games:o})]})},Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Be=t(190),Ee=t(95),Fe=Object(Ee.a)({palette:{primary:{main:"#3F51B5",contrastText:"#ffffff"},secondary:{main:"#FFA000",contrastText:"#ffffff"}}});o.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(Be.a,{theme:Fe,children:Object(w.jsx)(S.a,{maxSnack:1,dense:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(w.jsx)(Ge,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/game-points-calculator/build",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/game-points-calculator/build","/service-worker.js");Le?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Te(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Te(n,e)}))}}()}},[[133,1,2]]]);
//# sourceMappingURL=main.3a861206.chunk.js.map